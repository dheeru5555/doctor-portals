(window.webpackJsonp=window.webpackJsonp||[]).push([[3],{b5f9e0c375240aeaffec:function(e,t,n){"use strict";var a,i=n("8af190b70a6bc55c6f1b"),o=n.n(i),r=(n("8a2d1b95e05b6a321e74"),n("6938d226fd372a75cbf9")),l=n("b912ecc4473ae8a2ff0b"),c=n.n(l),d=n("2aea235afd5c55b8b19b"),s=n.n(d),u=n("e727e731a9bed8ec3c2a"),p=n.n(u),f=n("eb6b79030a47f0b10efc"),b=n.n(f),m=n("1551459233b95bf53af9"),g=n.n(m),v=n("10e4c616cb3b01bafafd"),y=n.n(v),h=n("29df10ef1bee6d38fd67"),O=n.n(h),w=n("ef58856f4f875bd36582"),j=n.n(w),_=n("16c7abd7abc407b9f247"),S=n.n(_),C=n("bc75856162e63311fb97"),x=n.n(C),N=n("8e8be3dfc3937f600de1"),I=n.n(N),P=n("ab7ebb4f5c369f043e8f"),B=n.n(P),D=n("921c0b8c557fe6ba5da8"),E=n.n(D),T=n("435859b6b76fb67a754a"),k=n.n(T),A=n("b27e083e7741c2dccb3f"),R=n.n(A),W=n("d7dd51e1bf6bfc2c9c3d"),q=n("789ff83a148645c528a1"),L=n("e799c547a20a503b338f"),F=n.n(L),z=n("ae9596d86622312bdbac"),M=n.n(z),U=n("63bac7d5ea40ecc9ba06"),J=n.n(U),$=n("7b322cdd2181307222e4"),G=n("bcf62943f039319845be"),V=n("ce1e49cdf0acd22acb13"),H=n.n(V);function K(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,a)}return n}function Q(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function X(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if(!(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e)))return;var n=[],a=!0,i=!1,o=void 0;try{for(var r,l=e[Symbol.iterator]();!(a=(r=l.next()).done)&&(n.push(r.value),!t||n.length!==t);a=!0);}catch(e){i=!0,o=e}finally{try{a||null==l.return||l.return()}finally{if(i)throw o}}return n}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function Y(){return(Y=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e}).apply(this,arguments)}function Z(e,t,n,i){a||(a="function"===typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103);var o=e&&e.defaultProps,r=arguments.length-3;if(t||0===r||(t={children:void 0}),1===r)t.children=i;else if(r>1){for(var l=new Array(r),c=0;c<r;c++)l[c]=arguments[c+3];t.children=l}if(t&&o)for(var d in o)void 0===t[d]&&(t[d]=o[d]);else t||(t=o||{});return{$$typeof:a,type:e,key:void 0===n?null:""+n,ref:null,props:t,_owner:null}}function ee(e,t){if(null==e)return{};var n,a,i=function(e,t){if(null==e)return{};var n,a,i={},o=Object.keys(e);for(a=0;a<o.length;a++)n=o[a],t.indexOf(n)>=0||(i[n]=e[n]);return i}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(a=0;a<o.length;a++)n=o[a],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}var te=function(e){return{root:{margin:0,padding:e.spacing(2)},closeButton:{position:"absolute",right:e.spacing(1),top:e.spacing(1),color:e.palette.grey[500]},Chip:{background:"#e0e0e075",padding:e.spacing(1),maxWidth:"100%",border:"1px solid black"},bold:{fontWeight:700,paddingTop:5,paddingBottom:5},Typography:{paddingTop:5,paddingBottom:5},row:{display:"flex"},column:{display:"flex",flexDirection:"column"},spaceBetween:{display:"flex",justifyContent:"space-between",alignItems:"center"},flexEnd:{display:"flex",justifyContent:"flex-end"},BillformControl:{marginTop:e.spacing(1),marginBottom:e.spacing(1),minWidth:"100%"},formControl:{marginTop:e.spacing(1),marginBottom:e.spacing(1),minWidth:150}}},ne=Z(B.a,{}),ae=Object(r.withStyles)(te)(function(e){var t=e.children,n=e.classes,a=e.onClose,i=ee(e,["children","classes","onClose"]);return o.a.createElement(b.a,Y({disableTypography:!0,className:n.root},i),Z(E.a,{variant:"h6"},void 0,t),a?Z(F.a,{"aria-label":"close",className:n.closeButton,onClick:a},void 0,ne):null)}),ie=Object(r.withStyles)(function(e){return{root:{padding:e.spacing(2)}}})(g.a),oe=Object(r.withStyles)(function(e){return{root:{margin:0,padding:e.spacing(1),justifyContent:"center"}}})(y.a),re=Z(J.a,{value:"",selected:!0},void 0,Z("em",{},void 0,"Select Item")),le=Z(R.a,{});var ce,de=Object(W.connect)(function(e){return{billables:e.get("appointmentReducer").billables}},{fetchAllBillables:G.a})(Object(r.withStyles)(te)(function(e){var t=new $.a,n={prod_id:"",prod_name:"",prod_quantity:1,prod_price:0,prod_total_price:0},a=e.classes,r=(e.consultationDetails,e.billingId),l=e.onChangeValue,c=e.billables,d=X(o.a.useState(!1),2),u=d[0],f=d[1],b=X(o.a.useState(""),2),m=b[0],g=b[1],v=X(Object(i.useState)([]),2),y=v[0],h=v[1],O=X(Object(i.useState)(n),2),w=O[0],j=O[1],_=function(){f(!1)};return Object(W.useSelector)(function(e){return e.toJS()}).settingsReducer,Object(i.useEffect)(function(){h(c)},[]),Z("div",{style:{display:"contents"}},void 0,Z(s.a,{variant:"contained",autoFocus:!0,onClick:function(){f(!0)},style:{marginLeft:8}},void 0,"Add Item"),Z(p.a,{fullWidth:!0,onClose:_,maxWidth:"sm","aria-labelledby":"customized-dialog-title",open:u},void 0,Z(ae,{id:"customized-dialog-title",onClose:_},void 0,"Bill / Payment"),Z(ie,{},void 0,Z(k.a,{container:!0,spacing:4,justify:"center"},void 0,Z(k.a,{item:!0,xs:10},void 0,Z(E.a,{className:a.bold},void 0,"Bill Item"),Z(S.a,{className:a.BillformControl},void 0,Z(M.a,{fullWidth:!0,value:w.prod_id,displayEmpty:!0,name:"item",className:a.selectEmpty,onChange:function(e){var t=e.target.value;if(""!=t){var a=y.find(function(e){return e.id==t}),i=parseFloat(a.amount);j({prod_id:a.id,prod_name:a.name,prod_quantity:1,prod_price:i,prod_total_price:i})}else j(n)}},void 0,re,y.map(function(e){return Z(J.a,{value:e.id},e.name," ",e.name," ")})),Z(H.a,{style:{color:"red"}},void 0,m)),Z(S.a,{className:a.BillformControl},void 0,Z(x.a,{id:"adornment-weight",defaultValue:"1",value:w.prod_quantity,onChange:function(e){var t=""!=e.target.value?parseInt(e.target.value):0;j(function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?K(Object(n),!0).forEach(function(t){Q(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):K(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}({},w,{prod_quantity:e.target.value,prod_total_price:w.prod_price*t}))},inputProps:{"aria-label":"Weight"}})),le,Z(k.a,{container:!0},void 0,Z(k.a,{item:!0,sm:8,className:a.flexEnd},void 0,Z(E.a,{className:a.bold},void 0,"Total")),Z(k.a,{item:!0,sm:4,className:a.flexEnd},void 0,Z(E.a,{className:a.Typography},void 0,"Rs.",w.prod_total_price)))))),Z(oe,{},void 0,Z(s.a,{variant:"contained",autoFocus:!0,onClick:function(){var a={patient_id:e.consultationDetails.patient.id,clinic_id:e.consultationDetails.clinic.id,appointment_id:e.consultationDetails.id,bill_item_id:w.prod_id,item_amount:w.prod_price,quantity:parseInt(w.prod_quantity)};""!==e.billingId&&(a.bill_id=r),t.ACCOUNTS_URI().post("appointments/consultation/addBillItem",a).then(function(e){!0===e.data.success?(_(),l(),g(""),j(n)):g(e.data.errorMessage.bill_item[0])}).catch(function(e){return console.log(e)})}},void 0,"Save"))))})),se=n("d18b150bf005d511c70c"),ue=n.n(se),pe=n("ad4fea5d1d5c5e03445f"),fe=n.n(pe);function be(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,a)}return n}function me(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?be(Object(n),!0).forEach(function(t){ge(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):be(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function ge(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function ve(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if(!(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e)))return;var n=[],a=!0,i=!1,o=void 0;try{for(var r,l=e[Symbol.iterator]();!(a=(r=l.next()).done)&&(n.push(r.value),!t||n.length!==t);a=!0);}catch(e){i=!0,o=e}finally{try{a||null==l.return||l.return()}finally{if(i)throw o}}return n}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function ye(){return(ye=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e}).apply(this,arguments)}function he(e,t,n,a){ce||(ce="function"===typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103);var i=e&&e.defaultProps,o=arguments.length-3;if(t||0===o||(t={children:void 0}),1===o)t.children=a;else if(o>1){for(var r=new Array(o),l=0;l<o;l++)r[l]=arguments[l+3];t.children=r}if(t&&i)for(var c in i)void 0===t[c]&&(t[c]=i[c]);else t||(t=i||{});return{$$typeof:ce,type:e,key:void 0===n?null:""+n,ref:null,props:t,_owner:null}}function Oe(e,t){if(null==e)return{};var n,a,i=function(e,t){if(null==e)return{};var n,a,i={},o=Object.keys(e);for(a=0;a<o.length;a++)n=o[a],t.indexOf(n)>=0||(i[n]=e[n]);return i}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(a=0;a<o.length;a++)n=o[a],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}var we=function(e){return{root:{margin:0,padding:e.spacing(2)},closeButton:{position:"absolute",right:e.spacing(1),top:e.spacing(1)},Chip:{background:"#e0e0e075",padding:e.spacing(1),maxWidth:"100%",border:"1px solid black"},bold:{fontWeight:700,paddingTop:5,paddingBottom:5},Typography:{paddingTop:5,paddingBottom:5},row:{display:"flex"},column:{display:"flex",flexDirection:"column"},spaceBetween:{display:"flex",justifyContent:"space-between"},flexEnd:{display:"flex",justifyContent:"flex-end"},alignItemsCenter:{display:"flex",alignItems:"center"},itemName:{display:"flex",alignItems:"center",paddingTop:5,paddingBottom:5},delete:{fontSize:14,cursor:"pointer",marginLeft:10},edit:{fontSize:14,cursor:"pointer",marginLeft:10},nobills:{textAlign:"center",color:"#dcdcdc"},textLink:{color:"#0089FF",cursor:"pointer"},formControlMargin:{width:100,margin:"8px 0","& .MuiInput-root":{border:"none"},"& input":{padding:5},"& .MuiInput-underline:after":{boxShadow:"none",borderRadius:0}},formControl:{width:100,"& .MuiInput-root":{border:"none"},"& input":{padding:5},"& .MuiInput-underline:after":{boxShadow:"none",borderRadius:0}},formControlBorder:{width:100,margin:"8px 0","& input":{padding:5},"& .MuiInput-underline:after":{boxShadow:"none",borderRadius:0,border:"none"}}}},je=he(B.a,{}),_e=Object(r.withStyles)(we)(function(e){var t=e.children,n=e.classes,a=e.onClose,i=Oe(e,["children","classes","onClose"]);return o.a.createElement(b.a,ye({disableTypography:!0,className:n.root},i),he(E.a,{variant:"h6"},void 0,t),a?he(s.a,{"aria-label":"close",variant:"outlined",color:"primary",className:n.closeButton,onClick:a},void 0,"Close",je):null)}),Se=Object(r.withStyles)(function(e){return{root:{padding:e.spacing(2)}}})(g.a),Ce=Object(r.withStyles)(function(e){return{root:{margin:0,padding:e.spacing(1)}}})(y.a),xe=he(R.a,{}),Ne=he(R.a,{}),Ie=he("small",{},void 0,"Add New Bills to Generate Invoice");t.a=Object(W.connect)(function(e){var t=e.toJS(),n=t.dashboardReducer;t.BillingReducer,t.settingsReducer;return{payment_modes:n.masterData.payment_modes,cgst_persentage:n.masterData.cgst,sgst_persentage:n.masterData.sgst}},function(e){return{createinvoiceInvoice:function(t){return e(Object(q.d)(t))}}})(Object(r.withStyles)(we)(function(e){var t=new $.a,n=e.classes,a=(e.createinvoiceInvoice,e.isData),r=(e.payment_modes,e.cgst_persentage),l=e.sgst_persentage,d=(e.appointmentId,e.invoiceDisplay,e.consultationDetails,ve(o.a.useState(!1),2)),u=d[0],f=d[1],b=ve(o.a.useState(!0),2),m=(b[0],b[1]),g=ve(o.a.useState(!0),2),v=g[0],y=(g[1],ve(o.a.useState([]),2)),h=y[0],w=y[1],_=ve(o.a.useState(""),2),C=_[0],N=_[1],P=ve(o.a.useState(0),2),B=P[0],D=(P[1],ve(o.a.useState(!1),2)),T=D[0],A=D[1],R={appointment_id:null,product_item:[],cgst:0,sgst:0,discount:0,payment_mode:1,total_price:0},W=ve(Object(i.useState)(R),2),q=W[0],L=W[1],F=ve(Object(i.useState)({open:!1,message:""}),2),z=F[0],M=F[1];Object(i.useEffect)(function(){U()},[T,u]);var U=function(){t.ACCOUNTS_URI().get("appointments/consultation/getBillDetail/".concat(e.consultationDetails.id)).then(function(e){1==e.data.success?(w(e.data.data.billing_details.bill_details),N(e.data.data.billing_details.id),0!==e.data.data.billing_details.bill_details.length?G(e.data.data.billing_details.bill_details):L(R)):L(R)}).catch(function(e){return console.log(e)})},J=function(e,t){return e*t/100},G=function(e){var t=e.map(function(e){return{id:e.doctor_billable_id,quantity:e.quantity,price:e.amount}}),n=0;if(t.map(function(e){n+=e.price*e.quantity}),0!==n){var a=J(n,l),i=J(n,r),o=n+a+i-B;m(!0),L(me({},q,{cgst:i,discount:B,sgst:a,total_price:o.toFixed(2)}))}},V=function(){f(!0)},H=function(){f(!1)};return he("div",{style:{display:"contents"}},void 0,a?he(s.a,{variant:"contained",autoFocus:!0,onClick:V,style:{marginLeft:8}},void 0,"Bill / Payment"):he(s.a,{variant:"contained",onClick:V,style:{marginLeft:5}},void 0,"Create New Bill"),he(p.a,{fullWidth:!0,onClose:H,maxWidth:"sm","aria-labelledby":"customized-dialog-title",open:u},void 0,he(_e,{id:"customized-dialog-title",onClose:H},void 0,"Add Bill / Payment"),he(Se,{},void 0,he(k.a,{container:!0,spacing:4},void 0,he(k.a,{item:!0,xs:12},void 0,a?he("div",{},void 0,he(E.a,{className:n.bold},void 0,"Item Name"),h.map(function(a){return he("div",{},a.product_name,he("div",{className:n.spaceBetween},void 0,he(E.a,{className:n.itemName},void 0,a.product_name,he(O.a,{title:"remove"},void 0,he(j.a,{onClick:function(){return n=a.id,i={bill_item_id:n,bill_id:C,appointment_id:e.consultationDetails.id},void t.ACCOUNTS_URI().post("appointments/consultation/removeBillItem",i).then(function(e){U(),A(!0)}).catch(function(e){return console.log(e)});var n,i},className:n.delete},void 0,"delete"))),he("div",{},void 0,he(E.a,{variant:"caption",style:{marginLeft:5,whiteSpace:"nowrap"}},void 0,"Rs."),he("span",{},void 0,a.amount," ","(",null!==a.quantity?a.quantity:"",")"," "))),xe)}),Ne,he(k.a,{container:!0,alignItems:"center"},void 0,he(k.a,{item:!0,sm:8,className:n.flexEnd},void 0,he(E.a,{className:c()(n.bold,n.alignItemsCenter)},void 0,"SGST")),he(k.a,{item:!0,sm:4,className:n.flexEnd},void 0,he(S.a,{"aria-describedby":"weight-helper-text",className:n.formControl,disabled:!0},void 0,he(x.a,{id:"adornment-weight",value:q.sgst,startAdornment:he(I.a,{position:"start"},void 0,he(E.a,{variant:"caption",style:{marginLeft:5,whiteSpace:"nowrap"}},void 0,"Rs.")),inputProps:{"aria-label":"Weight"}})))),he(k.a,{container:!0,alignItems:"center"},void 0,he(k.a,{item:!0,sm:8,className:n.flexEnd},void 0,he(E.a,{className:c()(n.bold,n.alignItemsCenter)},void 0,"CGST")),he(k.a,{item:!0,sm:4,className:n.flexEnd},void 0,he(S.a,{"aria-describedby":"weight-helper-text",className:v?n.formControl:n.formControlBorder,disabled:v},void 0,he(x.a,{id:"adornment-weight",value:q.cgst,startAdornment:he(I.a,{position:"start"},void 0,he(E.a,{variant:"caption",style:{marginLeft:5,whiteSpace:"nowrap"}},void 0,"Rs.")),inputProps:{"aria-label":"Weight"}})))),he(k.a,{container:!0,alignItems:"center"},void 0,he(k.a,{item:!0,sm:8,className:n.flexEnd},void 0,he(E.a,{className:n.bold},void 0,"Total")),he(k.a,{item:!0,sm:4,className:n.flexEnd},void 0,he(S.a,{"aria-describedby":"weight-helper-text",className:n.formControl,disabled:!0},void 0,he(x.a,{id:"adornment-weight",value:q.total_price,startAdornment:he(I.a,{position:"start"},void 0,he(E.a,{variant:"caption",style:{marginLeft:5,whiteSpace:"nowrap"}},void 0,"Rs.")),inputProps:{"aria-label":"Weight"}}))))):he("div",{className:n.nobills},void 0,he(E.a,{className:n.bold},void 0,"No bills Found"),Ie)))),he(Ce,{},void 0,he(de,{consultationDetails:e.consultationDetails,billingId:C,onChangeValue:function(){A(!T)}}))),he(ue.a,{anchorOrigin:{vertical:"bottom",horizontal:"right"},onClose:function(){return M(me({},z,{open:!1}))},open:z.open,autoHideDuration:6e3},void 0,he(function(e){return o.a.createElement(fe.a,ye({elevation:6,variant:"filled"},e))},{severity:"warning"},void 0,z.message)))}))}}]);